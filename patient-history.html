<!DOCTYPE html>
<html lang="en">
  <head>
   <meta charset="utf-8" />
    <title>RxConnect</title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Webflow" name="generator" />
    <link href="./styles/index.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link
      href="https://fonts.gstatic.com"
      rel="preconnect"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

    <script
      src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"
      type="text/javascript"
    ></script>
    <script type="text/javascript">
      WebFont.load({
        google: {
          families: [
            "Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic",
            "Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic",
            "Source Sans Pro:regular,700",
          ],
        },
      });
    </script>
    <script type="text/javascript">
      !(function (o, c) {
        var n = c.documentElement,
          t = " w-mod-";
        (n.className += t + "js"),
          ("ontouchstart" in o ||
            (o.DocumentTouch && c instanceof DocumentTouch)) &&
            (n.className += t + "touch");
      })(window, document);
    </script>
    <link
      href="./assets/favicon.png  "
      rel="shortcut icon"
      type="image/x-icon"
    />
    <link
      href="https://cdn.prod.website-files.com/57c55b6ef6306d483a15bdc0/589b0ba5dbf0b97f5096c916_pharmacy-symbol-darker.png"
      rel="apple-touch-icon"
    />

    <style>
      /* Page-specific light styles; inherits your Webflow classes */
      .history-section {
        padding: 40px 0;
      }
      .history-header {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 16px;
      }
      .patient-card {
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 12px rgba(0,0,0,.06);
        padding: 16px 20px;
        display: flex;
        gap: 20px;
        align-items: center;
      }
      .patient-avatar {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: #e9f6fc;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-family: "Montserrat", sans-serif;
        font-weight: 700;
        color: #20baf8;
      }
      .patient-meta h3 {
        margin: 0 0 2px 0;
        font-family: "Montserrat", sans-serif;
      }
      .filters {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
      }
      .filters input,
      .filters select {
        padding: 10px 12px;
        border: 1px solid #d9d9d9;
        border-radius: 6px;
        background: #fff;
        font-size: 14px;
      }
      .filters .button {
        padding: 10px 16px;
      }

      .card {
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 12px rgba(0,0,0,.06);
        padding: 20px;
        margin-bottom: 24px;
      }
      .card h4 {
        margin-top: 0;
        font-family: "Montserrat", sans-serif;
      }

      .timeline-wrap {
        width: 100%;
      }
      .legend {
        display: flex;
        gap: 16px;
        align-items: center;
        margin-top: 8px;
        flex-wrap: wrap;
      }
      .legend .dot {
        width: 10px; height: 10px; border-radius: 50%;
        display: inline-block; margin-right: 6px;
      }

      .table-wrap {
        overflow-x: auto;
      }
      table.prescriptions {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px;
      }
      table.prescriptions th, table.prescriptions td {
        padding: 10px 12px;
        border-bottom: 1px solid #eee;
        white-space: nowrap;
      }
      table.prescriptions th {
        text-align: left;
        font-weight: 600;
        color: #444;
      }
      table.prescriptions tr:hover {
        background: #f8fdff;
        cursor: pointer;
      }
      .status-badge {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 999px;
        font-size: 12px;
        font-weight: 600;
      }
      .status-issued { background: #e6f7ff; color: #096dd9; }
      .status-dispensed { background: #f6ffed; color: #389e0d; }
      .status-expired { background: #fff1f0; color: #cf1322; }

      /* Modal */
      .modal-backdrop {
        position: fixed; inset: 0;
        background: rgba(0,0,0,.45);
        display: none; align-items: center; justify-content: center;
        z-index: 1000;
      }
      .modal-backdrop.open { display: flex; }
      .modal {
        background: #fff; width: 92%; max-width: 720px;
        border-radius: 8px; box-shadow: 0 8px 40px rgba(0,0,0,.2);
        overflow: hidden;
      }
      .modal-header {
        padding: 14px 18px; border-bottom: 1px solid #eee;
        display: flex; align-items: center; justify-content: space-between;
      }
      .modal-header h4 { margin: 0; }
      .modal-close { border: none; background: transparent; font-size: 20px; cursor: pointer; }
      .modal-body { padding: 18px; }
      .rx-items { width: 100%; border-collapse: collapse; margin-top: 8px; }
      .rx-items th, .rx-items td { padding: 8px 10px; border-bottom: 1px solid #f0f0f0; text-align: left; }
      .rx-meta { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 8px 20px; margin: 8px 0 16px; }
      @media (max-width: 640px) { .rx-meta { grid-template-columns: 1fr; } }

      .muted { color: #777; }
        /* Base reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.menu-btn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #00aaff;
  border: none;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 1001;
}

.menu-btn img {
  width: 28px;
  height: 28px;
}

.mobile-menu {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 0;
  background: #fff;
  overflow: hidden;
  transition: height 0.4s ease;
  z-index: 1000;
}

.mobile-menu.open {
  height: 60vh;
}

.mobile-menu ul {
  list-style: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
  height: 100%;
}

.mobile-menu a {
  text-decoration: none;
  color: #0b214a;
  font-weight: 600;
  font-size: 16px;
}

.close-btn {
  position: absolute;
  top: 20px;
  right: 20px;
  background: #00aaff;
  color: white;
  border: none;
  font-size: 24px;
  width: 40px;
  height: 40px;
  border-radius: 4px;
  cursor: pointer;
}

    </style>
  </head>

  <body>
  
    <!-- NAVBAR (kept; minor icons retained) -->
     <div class="navbar-wrapper">
      <div class="top-info-bar">
        <div class="top-info-bar-container w-container">
          <a
            href="/"
            class="brand w-hidden-medium w-hidden-small w-hidden-tiny w-nav-brand"
            ><img
              src="./assets/rxconnect.png"
              alt="logo"
              style="width: 120px; height: auto; margin-bottom: 4px"
            /></a>
          <div class="info-bar w-clearfix">
            <div class="info-blocks-wrapper w-clearfix">
              <div class="top-info-block no-right-border w-clearfix">
                <div class="top-info-icon"></div>
                <div class="top-info-content">
                  <a href="tel:+44 20 7123 4567" class="contact-link"
                    >+44 20 7123 4567</a
                  ><a href="tel:+44 7712 345678" class="contact-link"
                    >+44 7712 345678</a
                  >
                </div>
              </div>
              <div class="top-info-block w-clearfix">
                <div class="top-info-icon _2"></div>
                <div class="top-info-content">
                  <a data-ix="popup-modal-show" href="#" class="contact-link"
                    >M5 3AB<br />
                   Church Road, Salford, Manchester</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        data-collapse="medium"
        data-animation="default"
        data-duration="400"
        data-easing="ease"
        data-easing2="ease"
        role="banner"
        class="navbar w-nav"
      >
        <div class="navbar-container w-container">
          <a href="/" class="brand w-hidden-main w-nav-brand"
            ><img
              src="./assets/rxconnect.png"
              alt="logo"
              style="width: 140px; height: auto;"
            /></a>
        <nav role="navigation" class="nav-menu w-nav-menu">
    <a href="./about-us.html" aria-current="page" class="nav-link w-nav-link w--current">Who we are</a>
    <a href="./dr-form.html" class="nav-link w-nav-link">E-Prescriptions</a>
    <a href="./prescriptions.html" class="nav-link w-nav-link">My Prescriptions</a>
    <a href="./doctors.html" class="nav-link w-nav-link">Doctors</a>
    <a href="./patient-history.html" class="nav-link w-nav-link">Patient history</a>
    <a href="./FAQs.html" class="nav-link w-nav-link">FAQs</a>
   
  </nav>

          <div id="menu-btn" class="menu-button w-nav-button">
            <i class="fa-solid fa-bars" id="menu-icon"></i>
          </div>
        </div>


      </div>
    </div>

    <!-- Scroll navbar (unchanged visually) -->
    <div
      data-collapse="medium"
      data-animation="default"
      data-duration="400"
      data-ix="display-scroll-navbar"
      data-easing="ease"
      data-easing2="ease"
      role="banner"
      class="navbar-scroll w-hidden-medium w-hidden-small w-hidden-tiny w-nav"
    >
      <div class="nav-scroll-container w-container">
        <div class="menu-button scroll-menu-button w-nav-button">
          <div class="w-icon-nav-menu"></div>
        </div>
          <a
          href="/"
          aria-current="page"
          class="brand scroll w-hidden-medium w-hidden-small w-hidden-tiny w-nav-brand w--current"
          > <img
              src="./assets/rxconnect.png"
              alt="logo"
              style="width: 120px; height: auto; margin-bottom: 4px"
            /></a>
        <nav role="navigation" class="nav-menu w-nav-menu">
   <a href="./about-us.html" aria-current="page" class="nav-link w-nav-link w--current">Who we are</a>
    <a href="./dr-form.html" class="nav-link w-nav-link">E-Prescriptions</a>
    <a href="./prescriptions.html" class="nav-link w-nav-link">My Prescriptions</a>
    <a href="./doctors.html" class="nav-link w-nav-link">Doctors</a>
    <a href="./patient-history.html" class="nav-link w-nav-link">Patient history</a>
    <a href="./FAQs.html" class="nav-link w-nav-link">FAQs</a>

  </nav>
      
      </div>
    </div>

    <!-- Banner -->
    <div class="page-banner">
      <div class="page-banner-container w-container">
        <div class="page-header-content">
          <h1 class="page-heading">Patient History</h1>
          <div class="subtitle white">Timeline of prescriptions and status</div>
          <div class="underline white"></div>
        </div>
      </div>
    </div>

    <!-- Patient History Content -->
    <div class="history-section">
      <div class="w-container">
        <!-- Header: Patient summary + filters -->
        <div class="history-header">
          <div class="patient-card">
            <div class="patient-avatar" id="patientAvatar">JD</div>
            <div class="patient-meta">
              <h3 id="patientName">John Doe</h3>
              <div class="muted">MRN: <span id="patientMrn">MRN-002134</span> • DOB: <span id="patientDob">1988-02-14</span></div>
            </div>
          </div>

          <form class="filters" id="filtersForm">
            <input type="date" id="fromDate" />
            <input type="date" id="toDate" />
            <select id="statusFilter">
              <option value="">All Statuses</option>
              <option value="issued">Issued</option>
              <option value="dispensed">Dispensed</option>
              <option value="expired">Expired</option>
            </select>
            <button type="submit" class="button w-button">Apply</button>
            <button type="button" id="resetFilters" class="button w-button">Reset</button>
          </form>
        </div>

        <!-- Timeline Card -->
        <div class="card">
          <h4>Prescription Timeline</h4>
          <div class="timeline-wrap">
            <canvas id="timelineChart" height="80" aria-label="Prescription timeline chart" role="img"></canvas>
          </div>
          <div class="legend">
            <span><span class="dot" style="background:#1890ff"></span> Issued</span>
            <span><span class="dot" style="background:#52c41a"></span> Dispensed</span>
            <span><span class="dot" style="background:#f5222d"></span> Expired</span>
          </div>
          <div class="muted" style="margin-top:8px">
            Hint: Click a point in the chart or a row in the table to view details.
          </div>
        </div>

        <!-- Table Card -->
        <div class="card">
          <h4>Prescriptions</h4>
          <div class="table-wrap">
            <table class="prescriptions" id="rxTable">
              <thead>
                <tr>
                  <th>Rx ID</th>
                  <th>Date</th>
                  <th>Doctor</th>
                  <th>Status</th>
                  <th>Items</th>
                </tr>
              </thead>
              <tbody><!-- filled by JS --></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal: Prescription Details -->
    <div class="modal-backdrop" id="rxModalBackdrop" aria-hidden="true">
      <div class="modal" role="dialog" aria-modal="true" aria-labelledby="rxModalTitle">
        <div class="modal-header">
          <h4 id="rxModalTitle">Prescription</h4>
          <button class="modal-close" aria-label="Close" id="rxModalClose">&times;</button>
        </div>
        <div class="modal-body">
          <div class="rx-meta">
            <div><strong>Rx ID:</strong> <span id="m_rxId">—</span></div>
            <div><strong>Date:</strong> <span id="m_date">—</span></div>
            <div><strong>Doctor:</strong> <span id="m_doctor">—</span></div>
            <div><strong>Status:</strong> <span id="m_status">—</span></div>
          </div>
          <div class="muted" id="m_notes"></div>
          <table class="rx-items" id="m_items">
            <thead>
              <tr>
                <th>Drug</th>
                <th>Strength</th>
                <th>Form</th>
                <th>Dose/Frequency</th>
                <th>Duration</th>
                <th>Qty</th>
              </tr>
            </thead>
            <tbody><!-- items injected --></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- FOOTER (kept) -->
 <div class="footer">
      <div class="w-container">
        <div class="emergency-wrapper">
          <img
            src="https://cdn.prod.website-files.com/57c55b6ef6306d483a15bdc0/5822042610a8d4ee31522b7d_24-hours-phone-service.png"
            width="64"
            alt=""
            class="emergency-footer-icon"
          />
          <h4 class="white">emergency cases</h4>
          <a href="tel:+1-600-700-6200" class="w-inline-block"
            ><div class="emergency-number">+44 20 7123 4567</div></a
          >
        </div>
        <div class="flex-box space-between">
          <div class="_33-percent-column right-padding">
            <img
              src="./assets/rxconnect.png"
              alt=""
              class="footer-logo"
              style="width: 160px; height: auto; margin-bottom: 2px"
            />
            <p class="white footer-paragraph">
              RxConnect is an international private health care provider. We have
              more than 20 years of experience. Our patients are provided with
              access to comprehensive outpatient and inpatient services, as well
              as a full range of laboratory diagnostics.
            </p>
          </div>
          <div class="_17-percent-column">
            <div>
              <div class="footer-header-wrapper">
                <h4 class="footer-title">Navigation</h4>
                <div class="footer-line"></div>
              </div>
                <a href="./about-us.html" class="footer-link">Who we are</a>
              <a href="./dr-form.html" class="footer-link">E-prescription</a>
              <a href="./prescriptions.html" class="footer-link">My prescription</a>
              <a href="./doctors.html" class="footer-link">Doctors</a>
              <a href="./patient-history.html" class="footer-link">Patient history</a>
              <a href="./FAQs.html" class="footer-link">FAQs</a>
            </div>
          </div>
          <div class="_17-percent-column next">
            <div>
              <div class="footer-header-wrapper">
                <h4 class="footer-title">Departments</h4>
                <div class="footer-line"></div>
              </div>
              <div class="w-dyn-list">
                <div role="list" class="w-dyn-items">
                  <div role="listitem" class="w-clearfix w-dyn-item">
                    <a href="/departments/accident-and-emergency-ae" class="footer-link">Physiotherapy</a>
                  </div>
                  <div role="listitem" class="w-clearfix w-dyn-item">
                    <a href="/departments/eye-care" class="footer-link">Optical</a>
                  </div>
                  <div role="listitem" class="w-clearfix w-dyn-item">
                    <a href="/departments/traumatology" class="footer-link">Dental</a>
                  </div>
                  <div role="listitem" class="w-clearfix w-dyn-item">
                    <a href="/departments/dental-care" class="footer-link">X-Ray</a>
                  </div>
                  <div role="listitem" class="w-clearfix w-dyn-item">
                    <a href="/departments/cardiology" class="footer-link">Cardiology</a>
                  </div>
                  <div role="listitem" class="w-clearfix w-dyn-item">
                    <a href="/departments/neurology" class="footer-link">Neurology</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="_33-percent-column contact-footer">
            <div>
              <div class="footer-header-wrapper">
                <h4 class="footer-title">Contact Us</h4>
                <div class="footer-line"></div>
              </div>
              <div class="footer-contact-block">
                <img
                  src="https://cdn.prod.website-files.com/57c55b6ef6306d483a15bdc0/57fb365745bf29a4636cc96d_marker_white.png"
                  alt=""
                  class="footer-contact-icon"
                />
                <div>
                  <a data-ix="popup-modal-show" href="#" class="footer-link contact">M5 3AB Church Road, Salford, Manchester</a>
                </div>
              </div>
              <div class="footer-contact-block">
                <img
                  src="https://cdn.prod.website-files.com/57c55b6ef6306d483a15bdc0/57fb375654bcd3af63a1e75b_emai_whitel.png"
                  alt=""
                  class="footer-contact-icon"
                />
                <div>
                  <a href="mailto:" class="footer-link contact">info@rxconnect.com</a>
                </div>
              </div>
              <div class="footer-contact-block">
                <img
                  src="https://cdn.prod.website-files.com/57c55b6ef6306d483a15bdc0/57fb417d8ae3efd95b4c1313_phone-receiver.png"
                  alt=""
                  class="footer-contact-icon"
                />
                <div>
                  <a href="tel:+61393455522" class="footer-link">+44 7712 345678</a>
                  <a href="tel:+61393455522" class="footer-link">+44 20 7123 4567</a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="test-row w-row">
          <div class="footer-column w-col w-col-3">
            <div>
              <div class="footer-header-wrapper">
                <h4 class="footer-title">Contact Us</h4>
                <div class="footer-line"></div>
              </div>
              <div class="footer-contact-block">
                <img
                  src="https://cdn.prod.website-files.com/57c55b6ef6306d483a15bdc0/57fb365745bf29a4636cc96d_marker_white.png"
                  alt=""
                  class="footer-contact-icon"
                />
                <div>
                  <div class="footer-link"> 267 Collins St Melbourne Victoria 3000 </div>
                </div>
              </div>
              <div class="footer-contact-block">
                <img
                  src="https://cdn.prod.website-files.com/57c55b6ef6306d483a15bdc0/57fb375654bcd3af63a1e75b_emai_whitel.png"
                  alt=""
                  class="footer-contact-icon"
                />
                <div>
                  <a href="mailto:" class="footer-link contact">info@medicare.com</a>
                </div>
              </div>
              <div class="footer-contact-block">
                <img
                  src="https://cdn.prod.website-files.com/57c55b6ef6306d483a15bdc0/57fb417d8ae3efd95b4c1313_phone-receiver.png"
                  alt=""
                  class="footer-contact-icon"
                />
                <div>
                  <a href="tel:+61393455522" class="footer-link">03-9345-5522</a>
                  <a href="tel:+61393455522" class="footer-link">03-9345-4422</a>
                </div>
              </div>
            </div>
          </div>

          <div class="footer-column w-col w-col-3">
            <div>
              <div class="footer-header-wrapper">
                <h4 class="footer-title">Navigation</h4>
                <div class="footer-line"></div>
              </div>
               <a href="./about-us.html" class="footer-link">Who we are</a>
              <a href="./dr-form.html" class="footer-link">E-prescription</a>
              <a href="./prescriptions.html" class="footer-link">My prescription</a>
              <a href="./doctors.html" class="footer-link">Doctors</a>
              <a href="./patient-history.html" class="footer-link">Patient history</a>
              <a href="./FAQs.html" class="footer-link">FAQs</a>
            </div>
          </div>

          <div class="footer-column w-col w-col-3">
            <div>
              <div class="footer-header-wrapper">
                <h4 class="footer-title">Departments</h4>
                <div class="footer-line"></div>
              </div>
              <div class="w-dyn-list">
                <div role="list" class="w-dyn-items">
                  <div role="listitem" class="w-clearfix w-dyn-item"><a href="/departments/accident-and-emergency-ae" class="footer-link">Physiotherapy</a></div>
                  <div role="listitem" class="w-clearfix w-dyn-item"><a href="/departments/eye-care" class="footer-link">Optical</a></div>
                  <div role="listitem" class="w-clearfix w-dyn-item"><a href="/departments/traumatology" class="footer-link">Dental </a></div>
                  <div role="listitem" class="w-clearfix w-dyn-item"><a href="/departments/dental-care" class="footer-link">X-Ray</a></div>
                  <div role="listitem" class="w-clearfix w-dyn-item"><a href="/departments/cardiology" class="footer-link">Cardiology</a></div>
                  <div role="listitem" class="w-clearfix w-dyn-item"><a href="/departments/neurology" class="footer-link">Neurology</a></div>
                </div>
              </div>
            </div>
          </div>

          <div class="footer-column w-col w-col-3">
            <div class="footer-header-wrapper">
              <h4 class="footer-title">Message us</h4>
              <div class="footer-line"></div>
            </div>
            <div>
              <div class="w-form">
                <form
                  id="email-form-2"
                  name="email-form-2"
                  data-name="Email Form 2"
                  method="get"
                  data-wf-page-id="57c55b6ef6306d483a15bdc1"
                  data-wf-element-id="7c121d8a-d022-a32b-02d7-eb05da342546"
                >
                  <input
                    class="text-field name full-width w-input"
                    maxlength="256"
                    name="name"
                    data-name="Name"
                    placeholder="Enter your name"
                    type="text"
                    id="name"
                  /><input
                    class="text-field email full-width w-input"
                    maxlength="256"
                    name="email"
                    data-name="Email 3"
                    placeholder="Enter your email address"
                    type="email"
                    id="email-3"
                    required=""
                  /><input
                    type="submit"
                    data-wait="Please wait..."
                    class="button white full-width w-button"
                    value="Submit"
                  />
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div> Oops! Something went wrong while submitting the form </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="footer-credits">
          <div class="credits-wrapper">
            <div class="footer-socials">
              <a href="#" class="social-icon facebook w-inline-block"></a>
              <a href="#" class="social-icon twitter w-inline-block"></a>
              <a href="#" class="social-icon linkedin w-inline-block"></a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Data + Logic -->
    <script>
      // Demo dataset; replace with API data
      const patient = {
        initials: "JD",
        name: "John Doe",
        mrn: "MRN-002134",
        dob: "1988-02-14",
      };

      /**
       * prescriptions: array of:
       * {
       *   id, date (ISO), doctorId, doctorName, status: issued|dispensed|expired,
       *   notes, items: [{drug, strength, form, dose, frequency, duration, qty}]
       * }
       */
      const prescriptions = [
        {
          id: "RX-100245",
          date: "2025-01-15",
          doctorId: "D-102",
          doctorName: "Dr. William Doe",
          status: "dispensed",
          notes: "Follow-up in 2 weeks.",
          items: [
            { drug: "Amoxicillin", strength: "500 mg", form: "Capsule", dose: "1", frequency: "TID", duration: "7 days", qty: 21 },
            { drug: "Paracetamol", strength: "500 mg", form: "Tablet", dose: "1", frequency: "Q6H PRN", duration: "5 days", qty: 20 },
          ],
        },
        {
          id: "RX-100317",
          date: "2025-03-28",
          doctorId: "D-204",
          doctorName: "Dr. Jessica Doe",
          status: "dispensed",
          notes: "Allergy noted: Penicillin.",
          items: [
            { drug: "Azithromycin", strength: "250 mg", form: "Tablet", dose: "2 day 1, then 1", frequency: "QD", duration: "5 days", qty: 6 },
          ],
        },
        {
          id: "RX-100401",
          date: "2025-07-02",
          doctorId: "D-204",
          doctorName: "Dr. Jessica Doe",
          status: "issued",
          notes: "Advise hydration; return if fever persists.",
          items: [
            { drug: "Ibuprofen", strength: "400 mg", form: "Tablet", dose: "1", frequency: "TID after meals", duration: "5 days", qty: 15 },
          ],
        },
        {
          id: "RX-100198",
          date: "2024-11-10",
          doctorId: "D-102",
          doctorName: "Dr. William Doe",
          status: "expired",
          notes: "Old course; not dispensed within window.",
          items: [
            { drug: "Cefuroxime", strength: "500 mg", form: "Tablet", dose: "1", frequency: "BID", duration: "7 days", qty: 14 },
          ],
        },
      ];

      // Populate patient header
      document.getElementById("patientAvatar").textContent = patient.initials;
      document.getElementById("patientName").textContent = patient.name;
      document.getElementById("patientMrn").textContent = patient.mrn;
      document.getElementById("patientDob").textContent = patient.dob;

      // Helpers
      const statusColor = (s) => {
        if (s === "issued") return "#1890ff";
        if (s === "dispensed") return "#52c41a";
        return "#f5222d"; // expired
      };
      const statusClass = (s) =>
        s === "issued" ? "status-issued" : s === "dispensed" ? "status-dispensed" : "status-expired";

      // Build table
      const tbody = document.querySelector("#rxTable tbody");
      function renderTable(rows) {
        tbody.innerHTML = "";
        rows
          .sort((a, b) => new Date(a.date) - new Date(b.date))
          .forEach((rx) => {
            const tr = document.createElement("tr");
            tr.dataset.rxid = rx.id;
            tr.innerHTML = `
              <td>${rx.id}</td>
              <td>${rx.date}</td>
              <td>${rx.doctorName}</td>
              <td><span class="status-badge ${statusClass(rx.status)}">${rx.status}</span></td>
              <td>${rx.items.length}</td>
            `;
            tr.addEventListener("click", () => openModal(rx.id));
            tbody.appendChild(tr);
          });
      }

      // Modal logic
      const modalBackdrop = document.getElementById("rxModalBackdrop");
      const modalClose = document.getElementById("rxModalClose");
      function openModal(rxId) {
        const rx = prescriptions.find((r) => r.id === rxId);
        if (!rx) return;
        document.getElementById("rxModalTitle").textContent = `Prescription ${rx.id}`;
        document.getElementById("m_rxId").textContent = rx.id;
        document.getElementById("m_date").textContent = rx.date;
        document.getElementById("m_doctor").textContent = `${rx.doctorName} (${rx.doctorId})`;
        document.getElementById("m_status").textContent = rx.status;
        document.getElementById("m_notes").textContent = rx.notes || "";
        const itemsTbody = document.querySelector("#m_items tbody");
        itemsTbody.innerHTML = rx.items
          .map(
            (it) => `
            <tr>
              <td>${it.drug}</td>
              <td>${it.strength}</td>
              <td>${it.form}</td>
              <td>${it.dose} / ${it.frequency}</td>
              <td>${it.duration}</td>
              <td>${it.qty}</td>
            </tr>`
          )
          .join("");
        modalBackdrop.classList.add("open");
        modalBackdrop.setAttribute("aria-hidden", "false");
      }
      function closeModal() {
        modalBackdrop.classList.remove("open");
        modalBackdrop.setAttribute("aria-hidden", "true");
      }
      modalClose.addEventListener("click", closeModal);
      modalBackdrop.addEventListener("click", (e) => {
        if (e.target === modalBackdrop) closeModal();
      });
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeModal();
      });

      // Chart: scatter on time axis
      const ctx = document.getElementById("timelineChart").getContext("2d");
      let chart;
      function buildChart(rows) {
        const data = rows.map((rx) => ({
          x: new Date(rx.date),
          y: 1, // all on a single horizontal line
          rxid: rx.id,
          status: rx.status,
        }));
        const datasets = [
          {
            label: "Prescriptions",
            data,
            pointRadius: 5,
            pointHoverRadius: 7,
            showLine: false,
            borderWidth: 0,
            parsing: false,
            backgroundColor: data.map((d) => statusColor(d.status)),
          },
        ];

        if (chart) chart.destroy();
        chart = new Chart(ctx, {
          type: "scatter",
          data: { datasets },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { display: false },
              tooltip: {
                callbacks: {
                  label: (ctx) => {
                    const d = ctx.raw;
                    const rx = prescriptions.find((r) => r.id === d.rxid);
                    return `${rx.id} • ${rx.status} • ${rx.date}`;
                  },
                },
              },
            },
            scales: {
              x: {
                type: "time",
                time: { unit: "month" },
                ticks: { maxRotation: 0, autoSkip: true },
                grid: { display: false },
              },
              y: {
                display: false,
                min: 0, max: 2,
              },
            },
            onClick: (evt, elements) => {
              if (elements.length) {
                const idx = elements[0].index;
                const d = chart.data.datasets[0].data[idx];
                openModal(d.rxid);
              }
            },
          },
        });
      }

      // Filters
      const filtersForm = document.getElementById("filtersForm");
      const resetBtn = document.getElementById("resetFilters");
      function applyFilters() {
        const from = document.getElementById("fromDate").value;
        const to = document.getElementById("toDate").value;
        const status = document.getElementById("statusFilter").value;

        let rows = prescriptions.slice();
        if (from) rows = rows.filter((r) => new Date(r.date) >= new Date(from));
        if (to) rows = rows.filter((r) => new Date(r.date) <= new Date(to));
        if (status) rows = rows.filter((r) => r.status === status);

        renderTable(rows);
        buildChart(rows);
      }
      filtersForm.addEventListener("submit", (e) => {
        e.preventDefault();
        applyFilters();
      });
      resetBtn.addEventListener("click", () => {
        document.getElementById("fromDate").value = "";
        document.getElementById("toDate").value = "";
        document.getElementById("statusFilter").value = "";
        applyFilters();
      });

      // Init
      renderTable(prescriptions);
      buildChart(prescriptions);
    </script>
     <!-- JS -->
      <script>
  document.addEventListener("DOMContentLoaded", function () {
    const menuButton = document.querySelector(".menu-button");
    const navMenu = document.querySelector(".w-nav-menu");
    const icon = menuButton.querySelector("i");

    menuButton.addEventListener("click", function () {
      navMenu.classList.toggle("open");

      icon.classList.toggle("fa-bars");
      icon.classList.toggle("fa-xmark");

      if (navMenu.classList.contains("open")) {
        navMenu.style.display = "block";
        setTimeout(() => navMenu.style.opacity = "1", 10);
      } else {
        navMenu.style.opacity = "0";
        setTimeout(() => navMenu.style.display = "none", 400);
      }
    });

    const links = navMenu.querySelectorAll("a");
    links.forEach(link => {
      link.addEventListener("click", () => {
        navMenu.classList.remove("open");
        icon.classList.add("fa-bars");
        icon.classList.remove("fa-xmark");
        navMenu.style.opacity = "0";
        setTimeout(() => navMenu.style.display = "none", 400);
      });
    });
  });
</script>

  <script src="./scripts/index.js"></script>
  </body>
</html>
